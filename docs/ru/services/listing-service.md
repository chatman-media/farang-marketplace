# üè† Listing Service

## üìã –û–±–∑–æ—Ä

Listing Service - —ç—Ç–æ —Å–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ —Å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ò–ò-–ø–æ–∏—Å–∫–æ–º –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏. –û–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –ø–æ–∏—Å–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –æ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

- **–ü–æ—Ä—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: 3002
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL (listing_service_db)
- **ORM**: Drizzle ORM
- **–ü–æ–∏—Å–∫**: Elasticsearch + –ò–ò –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Vitest (4 —Ç–µ—Å—Ç–∞)
- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏**: 90%+

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
services/listing-service/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ controllers/     # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã API
‚îÇ   ‚îú‚îÄ‚îÄ middleware/      # –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û
‚îÇ   ‚îú‚îÄ‚îÄ models/         # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ routes/         # –ú–∞—Ä—à—Ä—É—Ç—ã API
‚îÇ   ‚îú‚îÄ‚îÄ services/       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai/         # –ò–ò —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ search/     # –ü–æ–∏—Å–∫–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ geo/        # –ì–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ utils/          # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ db/             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ types/          # TypeScript —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ tests/              # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ AI_SEARCH_API.md    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ò–ò –ø–æ–∏—Å–∫–∞
‚îî‚îÄ‚îÄ package.json
```

### –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

#### Listing (–û–±—ä—è–≤–ª–µ–Ω–∏–µ)
```typescript
interface Listing {
  id: string;                    // UUID
  title: string;                 // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
  description: string;           // –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
  type: PropertyType;            // CONDO, HOUSE, VILLA, APARTMENT, etc.
  category: ListingCategory;     // RENT, SALE, SHORT_TERM
  price: number;                 // –¶–µ–Ω–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –≤–∞–ª—é—Ç–µ
  currency: Currency;            // THB, USD, EUR, etc.
  pricePerSqm?: number;         // –¶–µ–Ω–∞ –∑–∞ –∫–≤.–º
  
  // –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
  bedrooms: number;
  bathrooms: number;
  area: number;                  // –ü–ª–æ—â–∞–¥—å –≤ –∫–≤.–º
  floorArea?: number;           // –ñ–∏–ª–∞—è –ø–ª–æ—â–∞–¥—å
  landArea?: number;            // –ü–ª–æ—â–∞–¥—å —É—á–∞—Å—Ç–∫–∞
  floor?: number;               // –≠—Ç–∞–∂
  totalFloors?: number;         // –í—Å–µ–≥–æ —ç—Ç–∞–∂–µ–π
  
  // –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
  location: Location;
  address: Address;
  coordinates: GeoPoint;
  
  // –ú–µ–¥–∏–∞
  images: ListingImage[];
  videos?: ListingVideo[];
  virtualTour?: string;         // URL –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ç—É—Ä–∞
  
  // –£–¥–æ–±—Å—Ç–≤–∞ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
  amenities: Amenity[];
  features: Feature[];
  
  // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  ownerId: string;              // ID –≤–ª–∞–¥–µ–ª—å—Ü–∞
  agencyId?: string;            // ID –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞
  agentId?: string;             // ID –∞–≥–µ–Ω—Ç–∞
  status: ListingStatus;        // ACTIVE, INACTIVE, SOLD, RENTED
  visibility: Visibility;       // PUBLIC, PRIVATE, AGENCY_ONLY
  
  // –ò–ò –¥–∞–Ω–Ω—ã–µ
  aiDescription?: string;       // –ò–ò-–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
  aiTags: string[];            // –ò–ò —Ç–µ–≥–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞
  searchVector: number[];       // –í–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞
  
  // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  views: number;
  favorites: number;
  inquiries: number;
  
  createdAt: Date;
  updatedAt: Date;
  publishedAt?: Date;
  expiresAt?: Date;
}
```

#### Location (–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ)
```typescript
interface Location {
  id: string;
  country: string;              // TH, US, etc.
  province: string;             // –ü—Ä–æ–≤–∏–Ω—Ü–∏—è/—à—Ç–∞—Ç
  city: string;                 // –ì–æ—Ä–æ–¥
  district: string;             // –†–∞–π–æ–Ω
  subDistrict?: string;         // –ü–æ–¥—Ä–∞–π–æ–Ω
  postalCode?: string;          // –ü–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å
  coordinates: GeoPoint;
  
  // –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
  nameEn: string;
  nameTh?: string;
  nameRu?: string;
  nameCn?: string;
}
```

#### ListingImage (–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
```typescript
interface ListingImage {
  id: string;
  listingId: string;
  url: string;                  // URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  thumbnailUrl: string;         // URL –º–∏–Ω–∏–∞—Ç—é—Ä—ã
  alt: string;                  // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç
  caption?: string;             // –ü–æ–¥–ø–∏—Å—å
  order: number;                // –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
  type: ImageType;              // EXTERIOR, INTERIOR, FLOOR_PLAN, etc.
  aiDescription?: string;       // –ò–ò –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  createdAt: Date;
}
```

## ü§ñ –ò–ò-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –≤–µ–∫—Ç–æ—Ä—ã
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –æ–ø–∏—Å–∞–Ω–∏—è–º
- –ü–æ–∏—Å–∫ –ø–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
- –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–∏—Å–∫–∞

### –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –ê–Ω–∞–ª–∏–∑ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π
- –ü–æ—Ö–æ–∂–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- –¢—Ä–µ–Ω–¥–æ–≤—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ò–ò-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –ø–æ —Ñ–æ—Ç–æ
- –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

## üåê API Endpoints

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏

#### POST /api/listings
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "title": "Luxury Condo in Bangkok",
  "description": "Beautiful 2-bedroom condo with city view",
  "type": "CONDO",
  "category": "RENT",
  "price": 45000,
  "currency": "THB",
  "bedrooms": 2,
  "bathrooms": 2,
  "area": 85,
  "location": {
    "country": "TH",
    "province": "Bangkok",
    "city": "Bangkok",
    "district": "Sukhumvit",
    "coordinates": {
      "lat": 13.7563,
      "lng": 100.5018
    }
  },
  "amenities": ["POOL", "GYM", "PARKING", "SECURITY"],
  "images": [
    {
      "url": "https://example.com/image1.jpg",
      "type": "EXTERIOR",
      "order": 1
    }
  ]
}
```

#### GET /api/listings/:id
–ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–æ ID

#### PUT /api/listings/:id
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

#### DELETE /api/listings/:id
–£–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

#### GET /api/listings
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```
?type=CONDO
&category=RENT
&minPrice=20000
&maxPrice=50000
&bedrooms=2
&location=Bangkok
&amenities=POOL,GYM
&page=1
&limit=20
&sort=price_asc
```

### –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

#### GET /api/search
–û–±—ã—á–Ω—ã–π –ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏

#### POST /api/search/ai
–ò–ò-–ø–æ–∏—Å–∫ —Å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º —è–∑—ã–∫–æ–º

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "query": "–ù–∞–π–¥–∏ –∫–≤–∞—Ä—Ç–∏—Ä—É —Å 2 —Å–ø–∞–ª—å–Ω—è–º–∏ —Ä—è–¥–æ–º —Å BTS –≤ –ë–∞–Ω–≥–∫–æ–∫–µ –¥–æ 40000 –±–∞—Ç",
  "language": "ru",
  "location": {
    "lat": 13.7563,
    "lng": 100.5018,
    "radius": 5000
  },
  "filters": {
    "maxPrice": 40000,
    "currency": "THB"
  }
}
```

#### GET /api/search/similar/:id
–ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π

#### GET /api/search/recommendations
–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ì–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–∏—Å–∫

#### GET /api/geo/nearby
–ü–æ–∏—Å–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```
?lat=13.7563
&lng=100.5018
&radius=2000
&type=CONDO
&category=RENT
```

#### GET /api/geo/areas
–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ä–∞–π–æ–Ω–æ–≤

#### GET /api/geo/transit
–ü–æ–∏—Å–∫ —Ä—è–¥–æ–º —Å –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

#### GET /api/listings/:id/stats
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

#### POST /api/listings/:id/view
–û—Ç–º–µ—Ç–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

#### POST /api/listings/:id/favorite
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ

#### GET /api/analytics/trends
–¢—Ä–µ–Ω–¥—ã —Ä—ã–Ω–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏

## üîç –ü–æ–∏—Å–∫–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –¢–∏–ø—ã –ø–æ–∏—Å–∫–∞

1. **–¢–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫**
   - –ü–æ–∏—Å–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É –∏ –æ–ø–∏—Å–∞–Ω–∏—é
   - –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—á–∞—Ç–æ–∫

2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**
   - –ü–æ —Ç–∏–ø—É –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
   - –ü–æ —Ü–µ–Ω–æ–≤–æ–º—É –¥–∏–∞–ø–∞–∑–æ–Ω—É
   - –ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∫–æ–º–Ω–∞—Ç
   - –ü–æ —É–¥–æ–±—Å—Ç–≤–∞–º
   - –ü–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—é

3. **–ì–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–∏—Å–∫**
   - –ü–æ–∏—Å–∫ –≤ —Ä–∞–¥–∏—É—Å–µ
   - –ü–æ–∏—Å–∫ –ø–æ —Ä–∞–π–æ–Ω–∞–º
   - –ü–æ–∏—Å–∫ —Ä—è–¥–æ–º —Å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º
   - –ü–æ–∏—Å–∫ —Ä—è–¥–æ–º —Å POI

4. **–ò–ò-–ø–æ–∏—Å–∫**
   - –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫
   - –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
   - –ü–æ–∏—Å–∫ –ø–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
   - –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- –ü–æ —Ü–µ–Ω–µ (–≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏–µ/—É–±—ã–≤–∞–Ω–∏–µ)
- –ü–æ –¥–∞—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- –ü–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏
- –ü–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- –ü–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é
- –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É

## üìä –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ò–ò —Å–µ—Ä–≤–∏—Å–∞–º–∏

### AI Service –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
```typescript
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏—è
const aiDescription = await aiService.generateDescription({
  type: listing.type,
  features: listing.features,
  location: listing.location,
  images: listing.images
});

// –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞
const searchVector = await aiService.createEmbedding(
  `${listing.title} ${listing.description}`
);

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
const recommendations = await aiService.getRecommendations({
  userId: user.id,
  currentListing: listing.id,
  preferences: user.preferences
});
```

## üñºÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏

### –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JPEG, PNG, WebP
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –º–∏–Ω–∏–∞—Ç—é—Ä
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∏ –∫–∞—á–µ—Å—Ç–≤–∞
- CDN –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞
- –í–æ–¥—è–Ω—ã–µ –∑–Ω–∞–∫–∏
- EXIF –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
- –ò–ò-–∞–Ω–∞–ª–∏–∑ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ (4 —Ç–µ—Å—Ç–∞)

1. **listing.test.ts** - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
   - –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
   - –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

2. **search.test.ts** - –ü–æ–∏—Å–∫–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
   - –¢–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
   - –ì–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–∏—Å–∫
   - –ò–ò-–ø–æ–∏—Å–∫

3. **ai.test.ts** - –ò–ò —Ñ—É–Ω–∫—Ü–∏–∏
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏–π
   - –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

4. **media.test.ts** - –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
bun test

# –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
bun test --coverage

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
bun test:integration
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```env
# –°–µ—Ä–≤–µ—Ä
PORT=3002
NODE_ENV=production

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=postgresql://user:password@localhost:5432/listing_service_db

# Elasticsearch
ELASTICSEARCH_URL=http://localhost:9200
ELASTICSEARCH_INDEX=listings

# –ò–ò —Å–µ—Ä–≤–∏—Å—ã
OPENAI_API_KEY=your-openai-key
AI_SERVICE_URL=http://localhost:3006

# –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
AWS_S3_BUCKET=thailand-marketplace-media
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_REGION=ap-southeast-1

# CDN
CDN_URL=https://cdn.thailand-marketplace.com

# –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
GOOGLE_MAPS_API_KEY=your-google-maps-key

# Redis
REDIS_URL=redis://localhost:6379

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
SENTRY_DSN=your-sentry-dsn
```

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- **AI Service**: –ò–ò-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞
- **User Service**: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ø—Ä–æ—Ñ–∏–ª–∏
- **Booking Service**: –°–≤—è–∑—å —Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
- **Agency Service**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞–º–∏

### –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- **Google Maps API**: –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –∏ –∫–∞—Ä—Ç—ã
- **AWS S3**: –•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
- **Elasticsearch**: –ü–æ–∏—Å–∫–æ–≤—ã–π –¥–≤–∏–∂–æ–∫
- **OpenAI API**: –ò–ò-–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞
- **CloudFlare**: CDN –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ò–Ω–¥–µ–∫—Å—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –°–∂–∞—Ç–∏–µ API –æ—Ç–≤–µ—Ç–æ–≤

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- –®–∞—Ä–¥–∏–Ω–≥ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º
- CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Redis
- Elasticsearch –∫–ª–∞—Å—Ç–µ—Ä

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ú–µ—Ç—Ä–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ò–ò —Ñ—É–Ω–∫—Ü–∏–π
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–∞–π–æ–Ω—ã

### –ê–ª–µ—Ä—Ç—ã
- –í—ã—Å–æ–∫–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
- –û—à–∏–±–∫–∏ –ò–ò —Å–µ—Ä–≤–∏—Å–æ–≤
- –ü—Ä–æ–±–ª–µ–º—ã —Å Elasticsearch
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ API

---

**–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏:**
- üìß Email: listing-service@thailand-marketplace.com
- üì± Slack: #listing-service-support
- üìã Issues: [GitHub Issues](https://github.com/chatman-media/farang-marketplace/issues?label=listing-service)