# Listing Service - Thailand Marketplace

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è–º–∏ –≤ Thailand Marketplace. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ, –ø–æ–∏—Å–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏—Å—Ç–∏–Ω–≥–∞–º–∏ –¥–ª—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞, —Ç–æ–≤–∞—Ä–æ–≤ –∏ —É—Å–ª—É–≥.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç
- **–°–∫—É—Ç–µ—Ä—ã, –º–æ—Ç–æ—Ü–∏–∫–ª—ã, –∞–≤—Ç–æ–º–æ–±–∏–ª–∏** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
- **–î–µ—Ç–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏** - –¥–≤–∏–≥–∞—Ç–µ–ª—å, –º–æ—â–Ω–æ—Å—Ç—å, —Ä–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞, —Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è
- **–î–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç** - –Ω–æ–º–µ—Ä–∞, —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞, —Ç–µ—Ö–æ—Å–º–æ—Ç—Ä, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- **–°–∏—Å—Ç–µ–º–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è** - –∏—Å—Ç–æ—Ä–∏—è –¢–û, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–ì–∏–±–∫–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ** - –ø–æ—á–∞—Å–æ–≤–∞—è/–¥–Ω–µ–≤–Ω–∞—è/–Ω–µ–¥–µ–ª—å–Ω–∞—è/–º–µ—Å—è—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞
- **–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è** - —Ç–æ—á–∫–∏ –≤—ã–¥–∞—á–∏, –¥–æ—Å—Ç–∞–≤–∫–∞, –∑–æ–Ω—ã –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è

### üì¶ –¢–æ–≤–∞—Ä—ã
- **15 –∫–∞—Ç–µ–≥–æ—Ä–∏–π** - —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞, –º–µ–±–µ–ª—å, –æ–¥–µ–∂–¥–∞, —Å–ø–æ—Ä—Ç, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –¥—Ä.
- **–ì–∏–±–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏** - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–∞–∫ JSON
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã –ø—Ä–æ–¥–∞–∂** - –ø—Ä–æ–¥–∞–∂–∞, –∞—Ä–µ–Ω–¥–∞, –∞—É–∫—Ü–∏–æ–Ω
- **–†–∞—Å—Å—Ä–æ—á–∫–∞ –∏ —Å–∫–∏–¥–∫–∏** - –±–µ—Å–ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Ä–∞—Å—Å—Ä–æ—á–∫–∞, –æ–ø—Ç–æ–≤—ã–µ —Ü–µ–Ω—ã
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥–∞–≤—Ü–µ** - —Ä–µ–π—Ç–∏–Ω–≥, –æ—Ç–∑—ã–≤—ã, –ø–æ–ª–∏—Ç–∏–∫–∏

### üîç –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- **–£–º–Ω—ã–π –ø–æ–∏—Å–∫** - –ø–æ —Ç–∏–ø—É, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ü–µ–Ω–µ, –ª–æ–∫–∞—Ü–∏–∏
- **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã** - —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, —Ä–µ–π—Ç–∏–Ω–≥
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** - –ø–æ —Ü–µ–Ω–µ, –¥–∞—Ç–µ, –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏, —Ä–µ–π—Ç–∏–Ω–≥—É

### ü§ñ AI-Powered Search & Recommendations
- **–ú—É–ª—å—Ç–∏–ø—Ä–æ–≤–∞–π–¥–µ—Ä–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - OpenAI, DeepSeek, Claude —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º
- **–£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫** - –ò–ò –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** - –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–£–º–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥** - –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–¥–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —É—Å–ª—É–≥
- **–ê–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏** - –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –≤–≤–æ–¥–µ
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ø–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üìã API Endpoints

### –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç

#### –°–æ–∑–¥–∞—Ç—å –ª–∏—Å—Ç–∏–Ω–≥ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
```http
POST /api/listings/vehicles
Authorization: Bearer <token>
Content-Type: application/json

{
  "type": "scooter",
  "category": "economy",
  "condition": "good",
  "specifications": {
    "make": "Honda",
    "model": "PCX 150",
    "year": 2022,
    "color": "White",
    "engineSize": "150cc",
    "fuelType": "gasoline",
    "transmission": "cvt",
    "seatingCapacity": 2,
    "features": ["LED Headlights", "Digital Display"]
  },
  "documents": {
    "licensePlate": "‡∏Å‡∏Ç-1234",
    "documentsComplete": true
  },
  "pricing": {
    "basePrice": 800,
    "currency": "THB",
    "dailyRate": 800,
    "securityDeposit": 5000,
    "fuelPolicy": "full_to_full"
  },
  "location": {
    "currentLocation": "Patong Beach, Phuket",
    "pickupLocations": ["Patong Beach", "Phuket Airport"],
    "deliveryAvailable": true
  },
  "images": ["https://example.com/image1.jpg"]
}
```

#### –ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
```http
GET /api/listings/vehicles/search?type=scooter&category=economy&minPrice=500&maxPrice=1500&location=Phuket&page=1&limit=20
```

#### –ü–æ–ª—É—á–∏—Ç—å –ª–∏—Å—Ç–∏–Ω–≥ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
```http
GET /api/listings/vehicles/{id}
```

### –¢–æ–≤–∞—Ä—ã

#### –°–æ–∑–¥–∞—Ç—å –ª–∏—Å—Ç–∏–Ω–≥ —Ç–æ–≤–∞—Ä–∞
```http
POST /api/listings/products
Authorization: Bearer <token>
Content-Type: application/json

{
  "title": "iPhone 15 Pro Max 256GB",
  "description": "Latest iPhone with titanium design",
  "type": "electronics",
  "category": "smartphones",
  "condition": "new",
  "listingType": "sale",
  "specifications": {
    "brand": "Apple",
    "model": "iPhone 15 Pro Max",
    "technicalSpecs": {
      "storage": "256GB",
      "color": "Natural Titanium"
    },
    "features": ["Face ID", "Wireless Charging", "5G"],
    "warrantyPeriod": "1 year"
  },
  "pricing": {
    "price": 45000,
    "currency": "THB",
    "priceType": "fixed",
    "acceptedPayments": ["credit_card", "bank_transfer"]
  },
  "availability": {
    "isAvailable": true,
    "quantity": 5,
    "deliveryAvailable": true
  },
  "location": {
    "address": "123 Sukhumvit Road",
    "city": "Bangkok",
    "region": "Bangkok",
    "country": "Thailand"
  },
  "images": ["https://example.com/iphone.jpg"],
  "tags": ["iphone", "apple", "smartphone"]
}
```

#### –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤
```http
GET /api/listings/products/search?type=electronics&category=smartphones&minPrice=20000&maxPrice=60000&city=Bangkok&inStock=true
```

#### –ü–æ–ª—É—á–∏—Ç—å –ª–∏—Å—Ç–∏–Ω–≥ —Ç–æ–≤–∞—Ä–∞
```http
GET /api/listings/products/{id}
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏—Å—Ç–∏–Ω–≥–∞–º–∏

#### –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ª–∏—Å—Ç–∏–Ω–≥–∞
```http
PATCH /api/listings/{id}/status
Authorization: Bearer <token>
Content-Type: application/json

{
  "status": "active"
}
```

#### –£–¥–∞–ª–∏—Ç—å –ª–∏—Å—Ç–∏–Ω–≥
```http
DELETE /api/listings/{id}
Authorization: Bearer <token>
```

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 18+
- PostgreSQL 14+
- Bun (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ npm

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
cd services/listing-service
bun install
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å DATABASE_URL –≤ .env
# DATABASE_URL=postgresql://username:password@localhost:5432/thailand_marketplace

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
bun run drizzle-kit generate:pg

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
bun run drizzle-kit push:pg
```

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
bun run dev
```

### –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
```bash
bun run build
bun run start
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
bun run test
bun run test:watch
bun run test:coverage
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

#### `listings` - –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ª–∏—Å—Ç–∏–Ω–≥–æ–≤
- –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ª–∏—Å—Ç–∏–Ω–≥–æ–≤
- –¶–µ–Ω—ã, –ª–æ–∫–∞—Ü–∏—è, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, SEO
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –º–æ–¥–µ—Ä–∞—Ü–∏—è

#### `vehicles` - –î–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –¥–æ–∫—É–º–µ–Ω—Ç—ã, –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
- –¶–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –ª–æ–∫–∞—Ü–∏—è, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
- –ò—Å—Ç–æ—Ä–∏—è –∞—Ä–µ–Ω–¥—ã, –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã

#### `products` - –î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–æ–≤
- –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏, —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –≥–∞—Ä–∞–Ω—Ç–∏—è
- –¶–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –Ω–∞–ª–∏—á–∏–µ, –¥–æ—Å—Ç–∞–≤–∫–∞
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥–∞–≤—Ü–µ, –ø–æ–ª–∏—Ç–∏–∫–∏

#### `listing_availability` - –ö–∞–ª–µ–Ω–¥–∞—Ä—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- –°–ª–æ–∂–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∞—Ä–µ–Ω–¥—ã
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–∞—Ç, —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã

#### `listing_bookings` - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò—Å—Ç–æ—Ä–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –∏ –∞—Ä–µ–Ω–¥—ã
- –°—Ç–∞—Ç—É—Å—ã –ø–ª–∞—Ç–µ–∂–µ–π, —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –°–µ—Ä–≤–µ—Ä
PORT=3003
NODE_ENV=development

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=postgresql://localhost:5432/thailand_marketplace

# JWT
JWT_SECRET=your-secret-key

# CORS
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **Express Validator** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Zod —Å—Ö–µ–º—ã** –∏–∑ shared-types –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
- **Drizzle ORM** –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **Helmet** –¥–ª—è HTTP –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **Rate Limiting** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç DDoS
- **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö endpoints
- **CORS** –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ò–Ω–¥–µ–∫—Å—ã** –Ω–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **Lazy loading** —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Redis** –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **HTTP –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
- –ú–æ–∫–∏ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ 90%+

### Integration —Ç–µ—Å—Ç—ã
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API endpoints
- –†–µ–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã CI/CD

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker
```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package.json bun.lockb ./
RUN bun install --frozen-lockfile
COPY . .
RUN bun run build
EXPOSE 3003
CMD ["bun", "run", "start"]
```

### Kubernetes
- –ì–æ—Ç–æ–≤—ã–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- –ê–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥ –ø–æ –Ω–∞–≥—Ä—É–∑–∫–µ
- Health checks –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### Winston Logger
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ –≤ JSON
- –†–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ELK Stack

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- Health check endpoint
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
- **User Service** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ø—Ä–æ—Ñ–∏–ª–∏
- **Payment Service** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- **Notification Service** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **Search Service** - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ —Å AI

### –í–Ω–µ—à–Ω–∏–µ API
- **Google Maps** - –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è –∏ –º–∞—Ä—à—Ä—É—Ç—ã
- **Image CDN** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **Analytics** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

Listing Service –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –¥–ª—è:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏—è –ª–∏—Å—Ç–∏–Ω–≥–æ–≤ –ª—é–±—ã—Ö —Ç–∏–ø–æ–≤
- ‚úÖ –£–º–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫—É

**–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –ª—é–±—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∏ —É—Å–ª—É–≥!** üéâ

## üì∏ Image Upload & Processing (Task 3.3)

### Supported Features
- **Multiple formats**: JPEG, PNG, WebP
- **Automatic optimization**: WebP conversion with quality settings
- **Multiple sizes**: Thumbnail (300x225), Medium (800x600), Large (1200x900)
- **Smart validation**: File type, size (max 10MB), count (max 20 images)
- **Organized storage**: Date-based directory structure
- **Automatic cleanup**: Old images removed on updates

### Upload Endpoints

#### Upload images with vehicle listing
```http
POST /api/listings/vehicles
Authorization: Bearer <token>
Content-Type: multipart/form-data

images: [file1.jpg, file2.png, ...]
type: "scooter"
category: "economy"
...
```

#### Upload images with product listing
```http
POST /api/listings/products
Authorization: Bearer <token>
Content-Type: multipart/form-data

images: [file1.jpg, file2.png, ...]
type: "electronics"
category: "smartphones"
...
```

### Image URLs
- **Static serving**: `GET /uploads/{year}/{month}/{entity_type}/{entity_id}/{filename}`
- **Example**: `/uploads/2024/01/listings/listing_123/image_1_800x600.webp`
- **Caching**: Browser cache headers included for performance

## üè¢ Service Provider Management (Task 3.3)

### Create Service Provider
```http
POST /api/service-providers
Authorization: Bearer <token>
Content-Type: multipart/form-data

images: [avatar.jpg, cover.jpg, ...]
businessName: "Thai Scooter Rentals"
businessType: "company"
description: "Professional scooter rental service"
services: [
  {
    "name": "Scooter Rental",
    "category": "transportation",
    "price": 300,
    "currency": "THB",
    "priceType": "daily"
  }
]
contactInfo: {
  "phone": "+66812345678",
  "email": "info@thaiscooters.com"
}
location: {
  "address": "123 Sukhumvit Road",
  "city": "Bangkok",
  "region": "Bangkok",
  "country": "Thailand"
}
```

### Search Service Providers
```http
GET /api/service-providers/search?providerType=company&serviceTypes=transportation&location=Bangkok&rating=4.0&page=1&limit=20
```

### Update Service Provider
```http
PATCH /api/service-providers/{id}
Authorization: Bearer <token>
Content-Type: multipart/form-data

images: [new_avatar.jpg, ...]
businessName: "Updated Business Name"
description: "Updated description"
```

### Delete Service Provider
```http
DELETE /api/service-providers/{id}
Authorization: Bearer <token>
```

## ü§ñ AI-Powered Search API (Task 3.4)

### Enhanced Search
```http
POST /api/ai/search/enhanced
Content-Type: application/json

{
  "query": "scooter rental bangkok",
  "filters": {
    "type": "vehicle",
    "priceRange": { "min": 200, "max": 500 }
  },
  "userContext": {
    "userId": "user-123",
    "location": { "latitude": 13.7563, "longitude": 100.5018 }
  },
  "preferredProvider": "deepseek"
}
```

### Query Analysis
```http
POST /api/ai/analyze/query
Content-Type: application/json

{
  "query": "cheap motorbike rental near Khao San Road",
  "preferredProvider": "claude"
}
```

### Auto-suggestions
```http
GET /api/ai/suggestions?q=scoo&provider=deepseek
```

### Personalized Recommendations
```http
POST /api/ai/recommendations
Authorization: Bearer <token>
Content-Type: application/json

{
  "userId": "user-123",
  "type": "personalized",
  "context": {
    "currentItem": "listing-456",
    "preferences": { "priceRange": "budget", "vehicleType": "scooter" }
  },
  "limit": 10
}
```

### Service Matching
```http
POST /api/ai/services/match
Content-Type: application/json

{
  "requirements": {
    "serviceType": "scooter_rental",
    "location": { "latitude": 13.7563, "longitude": 100.5018 },
    "budget": { "min": 200, "max": 500 }
  }
}
```

### AI Service Status
```http
GET /api/ai/status
Authorization: Bearer <token>
```

**üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [AI_SEARCH_API.md](./AI_SEARCH_API.md)

## üß™ Testing (Task 3.3 & 3.4)

### Run All Tests
```bash
# Run all tests
bun test

# Run with coverage
bun test --coverage

# Run specific test file
bun test ServiceProviderService.test.ts
```

### Test Coverage
- **50+ tests** covering all major functionality
- **Listing Service**: Vehicle/product creation, search, validation
- **Service Providers**: CRUD operations, search filters, business logic
- **Image Upload**: Validation, processing, security, error handling
- **AI Services**: Multi-provider support, enhanced search, recommendations, error handling

## ‚úÖ Task 3.3 Completed!

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ **Image Upload & Processing** - –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ **Service Provider Management** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ —É—Å–ª—É–≥
- ‚úÖ **CRUD API Endpoints** - –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, —á—Ç–µ–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è
- ‚úÖ **Comprehensive Testing** - 32 —Ç–µ—Å—Ç–∞ –ø–æ–∫—Ä—ã–≤–∞—é—â–∏—Ö –≤—Å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ **Production Ready** - –ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π

**Listing Service –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –¥–ª—è Thailand Marketplace!** üéâ
